<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.121.2"><meta name="theme-color" content="#fff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>用户，组和权限 | 王硕&#39;s Blog</title>

    <link rel="stylesheet" href="/css/meme.min.444bcd3106642fa679d4a388e876aae08298837c58a47b88a6ed72069e59f8ad.css"/>

    
    
        <script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.9.0/min/lunr.stemmer.support.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.9.0/min/lunr.zh.min.js" defer></script><script src="/js/meme.min.a53faa29276c16f3f4813d358c1a014ef75a949fc352a375cab0608ca900f8a8.js"></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="王硕" /><meta name="description" content="用户，组和权限 本章内容 解释 Linux 的安全模型 解释用户帐号和组群帐号的目的 用户和组管理命令 理解并设置文件权限 默认权限 特殊权限 ACL 介绍安全 3A 资源分派： Authentication：认证 Authorization：授权 Accounting|Audition：审计 用户 user 令……" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="王硕&#39;s Blog" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="王硕&#39;s Blog" />
    <meta name="msapplication-starturl" content="../../../../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../../../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2020-01-04T22:26:57+08:00",
        "dateModified": "2023-03-14T17:04:55+08:00",
        "url": "https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/",
        "headline": "用户，组和权限",
        "description": "用户，组和权限 本章内容 解释 Linux 的安全模型 解释用户帐号和组群帐号的目的 用户和组管理命令 理解并设置文件权限 默认权限 特殊权限 ACL 介绍安全 3A 资源分派： Authentication：认证 Authorization：授权 Accounting|Audition：审计 用户 user 令……",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  9235 ,
        "image": ["https://oss.intelli.icu/images/2021/20210607235726.png-watermark","https://oss.intelli.icu/images/2021/20210607235727.png-watermark","https://oss.intelli.icu/images/2021/20210607235728.png-watermark","https://oss.intelli.icu/images/2021/20210607235729.png-watermark"],
        "author": {
            "@type": "Person",
            "description": "馍馍好好吃",
            "email": "337229941@qq.com",
            "image": "https://blog.ws.lu/icons/avatar.png",
            "url": "https://blog.ws.lu/",
            "name": "王硕"
        },
        "license": "本博客所有文章如无特别声明，均采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh) 许可协议。转载请注明出处 [王硕's Blog](https://blog.ws.lu/)。如有侵权，请联系删除。",
        "publisher": {
            "@type": "Organization",
            "name": "王硕's Blog",
            "logo": {
                "@type": "ImageObject",
                "url": "https://blog.ws.lu/icons/apple-touch-icon.png"
            },
            "url": "https://blog.ws.lu/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://blog.ws.lu/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary_large_image" />



    



<meta property="og:title" content="用户，组和权限" />
<meta property="og:description" content="用户，组和权限 本章内容 解释 Linux 的安全模型 解释用户帐号和组群帐号的目的 用户和组管理命令 理解并设置文件权限 默认权限 特殊权限 ACL 介绍安全 3A 资源分派： Authentication：认证 Authorization：授权 Accounting|Audition：审计 用户 user 令……" />
<meta property="og:url" content="https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/" />
<meta property="og:site_name" content="王硕&#39;s Blog" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://oss.intelli.icu/images/2021/20210607235726.png-watermark" />
<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-01-04T22:26:57&#43;08:00" />
    <meta property="article:modified_time" content="2023-03-14T17:04:55&#43;08:00" />
    
    <meta property="article:section" content="posts" />



    
    

    
</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">王硕&#39;s Blog</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon home"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg><span class="menu-item-name">首页</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/posts/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">文章</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">标签</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5l48.8-97.5a18 18 0 0128 0l48.8 97.5 103.4 -34.5a18 18 0 0119.8 19.8l-34.5 103.4l97.5 48.8a18 18 0 010 28l-97.5 48.8 34.5 103.4a18 18 0 01-19.8 19.8l-103.4-34.5-48.8 97.5a18 18 0 01-28 0l-48.8-97.5l-103.4 34.5a18 18 0 01-19.8-19.8l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8-34.5-103.4a18 18 0 0119.8-19.8zM256 128a128 128 0 10.01 0M256 160a96 96 0 10.01 0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412a256 256 0 10154-407a11.5 11.5 0 00-5 20a201.5 201.5 0 01-134 374a11.5 11.5 0 00-15 13"/></svg></a>
                        </li>
                    
                
            
        
            
                
            
        
            
                <li class="menu-item search-item">
                        <form id="search" class="search" role="search">
    <label for="search-input"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon search-icon"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></label>
    <input type="search" id="search-input" class="search-input">
</form>

<template id="search-result" hidden>
    <article class="content post">
        <h2 class="post-title"><a class="summary-title-link"></a></h2>
        <summary class="summary"></summary>
        <div class="read-more-container">
            <a class="read-more-link">阅读更多 »</a>
        </div>
    </article>
</template>

                    </li>
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title p-name">用户，组和权限</h1>

            

            
                
            

            
                

<div class="post-meta">
    
        
        <time datetime="2020-01-04T22:26:57&#43;08:00" class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;2020.1.4</time>
    
    
    
    
        
        
        
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;9235</span>
    
    
        
        <span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;19&nbsp;分钟</span>
    
    
    
</div>

            

            <nav class="contents">
  <h2 id="contents" class="contents-title">目录</h2><ol class="toc">
    <li><a id="contents:本章内容" href="#本章内容">本章内容</a></li>
    <li><a id="contents:介绍安全-3a" href="#介绍安全-3a">介绍安全 3A</a></li>
    <li><a id="contents:用户-user" href="#用户-user">用户 user</a></li>
    <li><a id="contents:组-group" href="#组-group">组 group</a></li>
    <li><a id="contents:安全上下文" href="#安全上下文">安全上下文</a></li>
    <li><a id="contents:组的类别" href="#组的类别">组的类别</a></li>
    <li><a id="contents:用户和组的配置文件" href="#用户和组的配置文件">用户和组的配置文件</a></li>
    <li><a id="contents:密码加密" href="#密码加密">密码加密</a></li>
    <li><a id="contents:密码的复杂性策略" href="#密码的复杂性策略">密码的复杂性策略</a></li>
    <li><a id="contents:文件操作" href="#文件操作">文件操作</a></li>
    <li><a id="contents:用户和组的管理命令" href="#用户和组的管理命令">用户和组的管理命令</a>
      <ol>
        <li><a id="contents:用户管理命令" href="#用户管理命令">用户管理命令</a>
          <ol>
            <li><a id="contents:useradd" href="#useradd">useradd</a></li>
            <li><a id="contents:usermod" href="#usermod">usermod</a></li>
            <li><a id="contents:userdel" href="#userdel">userdel</a></li>
          </ol>
        </li>
        <li><a id="contents:组帐号维护命令" href="#组帐号维护命令">组帐号维护命令</a>
          <ol>
            <li><a id="contents:groupadd" href="#groupadd">groupadd</a></li>
            <li><a id="contents:groupmod" href="#groupmod">groupmod</a></li>
            <li><a id="contents:groupdel" href="#groupdel">groupdel</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a id="contents:查看用户相关的-id-信息" href="#查看用户相关的-id-信息">查看用户相关的 ID 信息</a></li>
    <li><a id="contents:切换用户或以其他用户身份执行命令" href="#切换用户或以其他用户身份执行命令">切换用户或以其他用户身份执行命令</a></li>
    <li><a id="contents:设置密码" href="#设置密码">设置密码</a></li>
    <li><a id="contents:修改用户密码策略" href="#修改用户密码策略">修改用户密码策略</a></li>
    <li><a id="contents:用户相关的其他命令" href="#用户相关的其他命令">用户相关的其他命令</a></li>
    <li><a id="contents:更改组密码" href="#更改组密码">更改组密码</a></li>
    <li><a id="contents:更改和查看组成员" href="#更改和查看组成员">更改和查看组成员</a></li>
    <li><a id="contents:文件属性" href="#文件属性">文件属性</a>
      <ol>
        <li><a id="contents:文件属性操作" href="#文件属性操作">文件属性操作</a></li>
      </ol>
    </li>
    <li><a id="contents:文件权限" href="#文件权限">文件权限</a>
      <ol>
        <li><a id="contents:文件权限-1" href="#文件权限-1">文件权限</a>
          <ol>
            <li><a id="contents:文件的权限主要针对三类对象进行定义" href="#文件的权限主要针对三类对象进行定义">文件的权限主要针对三类对象进行定义</a></li>
            <li><a id="contents:每个文件针对每类访问者都定义了三种权限" href="#每个文件针对每类访问者都定义了三种权限">每个文件针对每类访问者都定义了三种权限</a></li>
            <li><a id="contents:文件的权限" href="#文件的权限">文件的权限</a></li>
            <li><a id="contents:目录的权限" href="#目录的权限">目录的权限</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a id="contents:八进制数字" href="#八进制数字">八进制数字</a></li>
    <li><a id="contents:修改文件权限" href="#修改文件权限">修改文件权限</a></li>
    <li><a id="contents:默认权限设置" href="#默认权限设置">默认权限设置</a></li>
    <li><a id="contents:权限相关练习" href="#权限相关练习">权限相关练习</a></li>
    <li><a id="contents:linux文件系统上的特殊权限" href="#linux文件系统上的特殊权限">Linux文件系统上的特殊权限</a>
      <ol>
        <li><a id="contents:三种特殊权限" href="#三种特殊权限">三种特殊权限</a></li>
        <li><a id="contents:特殊权限数字法" href="#特殊权限数字法">特殊权限数字法</a></li>
      </ol>
    </li>
    <li><a id="contents:设定文件特定属性" href="#设定文件特定属性">设定文件特定属性</a></li>
    <li><a id="contents:访问控制列表" href="#访问控制列表">访问控制列表</a></li>
  </ol>
</nav><div class="post-body e-content">
                <h1 id="用户组和权限"><a href="#用户组和权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:用户组和权限" class="headings">用户，组和权限</a></h1>
<h2 id="本章内容"><a href="#本章内容" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:本章内容" class="headings">本章内容</a></h2>
<ul>
<li>解释 Linux 的安全模型</li>
<li>解释用户帐号和组群帐号的目的</li>
<li>用户和组管理命令</li>
<li>理解并设置文件权限</li>
<li>默认权限</li>
<li>特殊权限</li>
<li>ACL</li>
</ul>
<h2 id="介绍安全-3a"><a href="#介绍安全-3a" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:介绍安全-3a" class="headings">介绍安全 3A</a></h2>
<p>资源分派：</p>
<ul>
<li>Authentication：认证</li>
<li>Authorization：授权</li>
<li>Accounting|Audition：审计</li>
</ul>
<h2 id="用户-user"><a href="#用户-user" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:用户-user" class="headings">用户 user</a></h2>
<ul>
<li>令牌 token，identity</li>
<li>Linux 用户：Username/UID</li>
<li>管理员：root，0</li>
<li>普通用户：1-60000 自动分配
<ul>
<li>
<p>系统用户：1-499，1-999（CentOS7）</p>
<p>对守护进程获取资源进行权限分配</p>
</li>
<li>
<p>登录用户：500+，1000+（CentOS7）</p>
<p>交互式登录</p>
</li>
</ul>
</li>
</ul>
<h2 id="组-group"><a href="#组-group" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:组-group" class="headings">组 group</a></h2>
<ul>
<li>
<p>Linux 组：Groupname/GID</p>
</li>
<li>
<p>管理员组：root，0</p>
</li>
<li>
<p>普通组：</p>
<ul>
<li>系统组：1-499，1-999（CentOS7）</li>
<li>普通组：500+，1000+（CentOS7）</li>
</ul>
</li>
<li>
<p><strong>在 Linux 中用户名和组名可以同名，用户 ID 和组 ID 也可以相同</strong></p>
</li>
<li>
<p><strong>一个用户可以属于多个组，一个组也可以包含多个用户</strong></p>
</li>
<li>
<p><strong>属于多个组的帐号，获得的权限是多个组权限的累加</strong></p>
</li>
</ul>
<p>Windows 查看用户组：<code>net localgroup</code>
Windows 查看用户帐号：<code>net user</code>
在 Windows 中用户名和组名不能同名</p>
<h2 id="安全上下文"><a href="#安全上下文" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:安全上下文" class="headings">安全上下文</a></h2>
<p>Linux 安全上下文</p>
<ul>
<li>运行中的程序：进程（process）</li>
<li>以进程发起者的身份运行：
<ul>
<li>root：/bin/cat</li>
<li>mage：/bin/cat</li>
</ul>
</li>
</ul>
<p>进程所能够访问资源的权限取决于进程的运行者的身份</p>
<h2 id="组的类别"><a href="#组的类别" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:组的类别" class="headings">组的类别</a></h2>
<p>Linux 组的类别</p>
<ul>
<li>用户的主要组（primary group）
<ul>
<li>用户必须属于一个且只有一个主组</li>
<li>组名同用户名，且仅包含一个用户，私有组</li>
</ul>
</li>
<li>用户的附加组（supplementary group）
<ul>
<li>一个用户可以属于零个或多个辅助组</li>
</ul>
</li>
</ul>
<p><strong>当创建新用户时，会自动创建一个与用户名同名的组，作为该用户的主要组</strong></p>
<blockquote>
<p>Windows 中创建新用户时，会默认将用户添加到 users 组中，不会创建新组</p>
</blockquote>
<p>使用 <code>id 用户名</code> 查看该用户的 uid，gid，groups</p>
<h2 id="用户和组的配置文件"><a href="#用户和组的配置文件" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:用户和组的配置文件" class="headings">用户和组的配置文件</a></h2>
<p>Linux 用户和组的配置文件</p>
<ul>
<li>
<p><strong>/etc/passwd</strong>：用户及其属性信息（名称，UID，主组 ID 等）</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root:x:0:0:root:/root:/bin/bash
</span></span><span class="line"><span class="cl">bin:x:1:1:bin:/bin:/sbin/nologin
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">wang:x:1000:1000::/home/wang:/bin/bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">格式：
</span></span><span class="line"><span class="cl">username:password:UID:GID:GECOS:directory:shell
</span></span><span class="line"><span class="cl">用户名：密码：用户 ID:主组 ID:用户描述：家目录:
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>修改用户描述可以使用 <code>chfn 用户名</code>，使用 <code>finger 用户名</code> 查看，使用 <code>chfn -f '' -o '' -p '' -h '' 用户名</code> 清空用户描述</p>
<p>使用 <code>usermod</code> 可以修改用户的各种属性，例如家目录等</p>
<p>如果 shell 为 nologin，说明该用户不能登录，使用 <code>chsh /sbin/nologin 用户名</code> 修改用户 shell 为 /sbin/nologin</p>
<p>可以使用 <code>getent passwd [用户名 1] [用户名 2] [用户名...]</code> 来查看所有或指定用户名的信息，类似于 <code>cat /etc/passwd</code></p>
<p>可通过修改该文件中的 UID 来更改用户的权限，<strong>如果没有 UID 为 0 的用户，系统启动时会卡住</strong>，可通过如下方式解决</p>
<blockquote>
<p>在如下页面
<img src="https://oss.intelli.icu/images/2021/20210607235726.png-watermark" alt="image"></br>
根据提示输入 <kbd>e</kbd>，在 linux16 的后方添加 <code>init=/bin/bash</code>
<img src="https://oss.intelli.icu/images/2021/20210607235727.png-watermark" alt="image"></br>
按 <kbd>Ctrl</kbd>+<kbd>x </kbd>启动
此时可以进入命令行模式</p>
<p>使用 <code>mount -o rw.remount /</code> 将根目录重新挂载为可读可写模式</p>
<p>修改 /etc/passwd 文件，<kbd>Ctrl</kbd>+<kbd>x</kbd> 保存，<code>reboot</code> 重启即可</p>
</blockquote>
</li>
<li>
<p><strong>/etc/group</strong>：组及其属性信息</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root:x:0:
</span></span><span class="line"><span class="cl">bin:x:1:
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">wang:x:1000:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">格式:
</span></span><span class="line"><span class="cl">组名称：组密码：组 ID:组成员
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>管理员将指定用户添加到指定组中 <code>groupmems -a 用户名 -g 组名</code>
管理员将指定用户从指定组中删除 <code>groupmems -d 用户名 -g 组名</code></p>
<p>普通用户使用 <code>newgrp 组名</code> 将本用户添加到指定组，并临时将指定组作为该用户的主组，此时需要使用到组密码</p>
<p>管理员使用 <code>gpasswd 组名</code> 给指定组添加密码</p>
<p>管理员将某个用户添加到指定组后，该用户如果正在使用，则需要重新登录才能显示已在该组中，因为用户是在登录时获取令牌的。</p>
<p>清空指定组的口令 <code>gpasswd -r 组名</code></p>
</li>
<li>
<p><strong>/etc/shadow</strong>：用户密码及其相关属性</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root:<span class="nv">$6$5</span>bHCOKlltInipu7D<span class="nv">$NmY1mZI3MAGIAznrPa6yqmzLVuTWr2od0PSDWCg4zGtdFd4xJEYeypkv2JtLBbnquig1b1RC9Lk5hetNP5N1r</span>/::0:99999:7:::
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">格式:
</span></span><span class="line"><span class="cl">login name:encrypted password:date of last password change:minimum password age:maximum password age:password warning period:password inactivity period:account expiration date:reserved field
</span></span><span class="line"><span class="cl">用户名：加密后的密码：最后一次修改密码距离 1970/01/01 的天数：密码在过几天可以被变更：密码再过几天必须被变更：密码过期前几天系统提醒用户：密码过期几天后帐号被锁定：帐号有效期：预留字段
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">加密后的密码：<span class="nv">$6$5</span>bHCOKlltInipu7D<span class="nv">$NmY1mZI3MAGIAznrPa6yqmzLVuTWr2od0PSDWCg4zGtdFd4xJEYeypkv2JtLBbnquig1b1RC9Lk5hetNP5N1r</span>/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">其中<span class="nv">$6</span> 代表使用 sha512 的加密算法加密，<span class="nv">$1</span> 代表使用 md5 加密算法加密
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>可以使用 <code>grub-md5-crypt</code> 来获取使用 md5 加密后的字符串</p>
<p><code>getent shadow [用户名 1] [用户名 2] [用户名...]</code> 来查看指定用户的口令信息</p>
<p>Windows 使用 <code>net accounts</code> 可以查看密码有效期等信息</p>
<p><strong>使用 <code>chage 用户名</code> 来修改用户口令的信息，直接编辑文件不安全，使用 <code>chage -d0 用户名</code>，使得该用户下次登录必须立即更改口令</strong></p>
</li>
<li>
<p><strong>/etc/gshadow</strong>：组密码及其相关属性</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root:::
</span></span><span class="line"><span class="cl">bin:::
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">wang:!::
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">格式：
</span></span><span class="line"><span class="cl">组名：加密后的组密码：当前组的管理员：组成员
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>使用 <code>pwunconv</code> 可以将口令（密码）放回到 /etc/passwd 中，<code>pwconv</code> 将口令还原到 /etc/shadow 中。</p>
<p><code>!</code> 代表禁用/锁定，相当于没有密码</p>
<p>可以使用 <code>getent</code> 来查看 passwd，shadow，group，gshadow 中的内容。</p>
</li>
</ul>
<h2 id="密码加密"><a href="#密码加密" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:密码加密" class="headings">密码加密</a></h2>
<p>当前使用的加密算法信息保存在 /etc/login.defs 文件中</p>
<ul>
<li><strong>加密机制</strong>
<ul>
<li>加密：明文 --&gt; 密文</li>
<li>解密：密文 --&gt; 明文</li>
</ul>
</li>
<li><strong>单向加密</strong>：哈希算法，原文不同，密文必不同
<ul>
<li>相同算法定长输出，获得密文不可逆推出原始数据</li>
<li>雪崩效应：初始条件的微小改变，引起结果的巨大改变
<ul>
<li>md5：message digest，128bit</li>
<li>sha1：secure hash algorithm，160bit</li>
<li>sha224：224bit</li>
<li>sha256：256bit</li>
<li>sha384：384bit</li>
<li>sha512：512bit</li>
</ul>
</li>
</ul>
</li>
<li><strong>更改加密算法</strong>：
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">authconfig --passalgo<span class="o">=</span>sha256 --update
</span></span></code></pre></td></tr></table></div>
</div>
</div>只会对以后添加的用户生效，对之前的用户不产生影响。</li>
</ul>
<h2 id="密码的复杂性策略"><a href="#密码的复杂性策略" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:密码的复杂性策略" class="headings">密码的复杂性策略</a></h2>
<ul>
<li>使用数字，大写字母，小写字母及特殊字符中至少 3 种</li>
<li>足够长</li>
<li>使用随机密码</li>
<li>定期更换，不要使用最近曾经使用过得密码</li>
</ul>
<p>使用 <code>openssl rand -base64 12</code> 生成随机密码</p>
<h2 id="文件操作"><a href="#文件操作" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件操作" class="headings">文件操作</a></h2>
<p>使用工具来对用户和组进行修改</p>
<ul>
<li>
<p><strong>vipw 和 vigr</strong></p>
<ul>
<li>vipw：相当于 <code>vi /etc/pwsswd</code></li>
<li>vigr：相当于 <code>vi /etc/group</code></li>
</ul>
</li>
<li>
<p><strong>pwck 和 grpck</strong></p>
<ul>
<li>pwck：passwd checked 检查 /etc/passwd 的文件格式是否正确</li>
<li>grpck：group checked 检查 /etc/group 文件格式是否正确</li>
</ul>
</li>
</ul>
<h2 id="用户和组的管理命令"><a href="#用户和组的管理命令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:用户和组的管理命令" class="headings">用户和组的管理命令</a></h2>
<h3 id="用户管理命令"><a href="#用户管理命令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:用户管理命令" class="headings">用户管理命令</a></h3>
<p><strong>/ect/login.defs</strong> 文件中存储着新建用户的默认配置信息等。</p>
<h4 id="useradd"><a href="#useradd" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:useradd" class="headings">useradd</a></h4>
<p>默认值设定在 /etc/default/useradd 文件中</p>
<pre tabindex="0"><code># useradd defaults file
GROUP=100   # 默认组 ID
HOME=/home  # 默认家目录
INACTIVE=-1 # 如果口令过期，是否锁定帐号
EXPIRE= # 锁定有效期
SHELL=/bin/bash # 默认 shell 类型
SKEL=/etc/skel  # 用户家目录的模板文件夹
CREATE_MAIL_SPOOL=yes   #
</code></pre><ul>
<li>显示默认设置 <code>useradd -D</code></li>
<li>修改默认配置
<ul>
<li><code>useradd -D -s SHELL</code></li>
<li><code>useradd -D -b BASE_DIR</code></li>
<li><code>useradd -D -g GROUP</code></li>
</ul>
</li>
</ul>
<p>创建新用户 <code>useradd [OPTIONS] 用户名</code></p>
<ul>
<li><code>-u UID</code>：指定 UID</li>
<li><code>-o</code>：配合 <code>-u</code> 选项，忽略 UID 唯一性检查，UID 相同，权限相同</li>
<li><code>-d HOME_DIR</code>：指定家目录，会自动创建</li>
<li><code>-r</code>：创建系统用户（CentOS7 中 UID 小于 1000），不会创建家目录</li>
<li><code>-s SHELL</code>：指定 shell 类型，系统用户建议设置为 /sbin/nologin</li>
<li><code>-c &quot;COMMENT&quot;</code>：添加描述</li>
<li><code>-g GID</code>：指定主组，不创建同名组</li>
<li><code>-G GROUP1[,GROUP2,...]</code>：指定附加组</li>
<li><code>-N</code>：将 users 设置为新用户的主组</li>
<li><code>-m</code>：创建家目录，用于系统用户</li>
<li><code>-M</code>：不创建家目录，用于非系统用户</li>
</ul>
<p>将 shell 类型设置为 <code>/sbin/nologin</code>，该用户不可登录也不能通过 <code>su 用户名</code> 切换，如果只指定 <code>-r</code> 选项，不指定 <code>-s</code> 为 <code>/sbin/nologin</code>，则可以通过 <code>su</code> 命令切换到该用户。</p>
<p><code>groups 用户名</code> 查看用户所属的所有组，第一个为主组</p>
<p><strong>练习</strong></p>
<ol>
<li>
<p>创建用户 gentoo，附加组为 bin 和 root，默认 shell 为 /bin/csh，注释信息为 &quot;Gentoo Distribution&quot;</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -G bin,root -s /bin/csh -c <span class="s2">&#34;Gentoo Distribution&#34;</span> gentoo
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>创建下面的用户，组和组成员关系</p>
<ul>
<li>
<p>名字为 webs 的组</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">groupadd webs
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>用户 nginx 使用 webs 作为附属组</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -G webs nginx
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>用户 varnish，也使用 webs 作为附属组</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -G webs varnish
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>用户 mysql，不可交互登录系统，且不是 webs 的成员，nginx，varnish，mysql 密码都是 123456</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -s /sbin/nologin mysql
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">123456</span> <span class="p">|</span> passwd --stdin nginx
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">123456</span> <span class="p">|</span> passwd --stdin varnish
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">123456</span> <span class="p">|</span> passwd --stdin mysql
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
</li>
</ol>
<p><strong>新建用户的相关文件和命令</strong></p>
<ul>
<li>/etc/default/useradd</li>
<li>/etc/skel/*</li>
<li>/etc/login.defs</li>
<li><code>newusers</code> 与 <code>passwd</code> 格式相同的文件：批量创建用户</li>
<li><code>chpasswd</code>：批量修改用户口令</li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># chpasswd</span>
</span></span><span class="line"><span class="cl">user1:password1
</span></span><span class="line"><span class="cl">user2:password2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">或
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># echo user1:password1 | chpasswd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">或
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">在文本文件（例如：file）中存储如下格式的内容
</span></span><span class="line"><span class="cl">user1:password1
</span></span><span class="line"><span class="cl">user2:password2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cat file | chpasswd</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div><h4 id="usermod"><a href="#usermod" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:usermod" class="headings">usermod</a></h4>
<p>修改用户属性 <code>usermod [OPTION]</code> 用户名</p>
<ul>
<li><code>-u UID</code>：新 UID</li>
<li><code>-g GID</code>：新 GID</li>
<li><code>-G GROUP1[,GROUP2,...]</code>：新附加组，原来的附加组将会被覆盖；若保留原有，则需要同时使用 <code>-a</code> 选项</li>
<li><code>-s SHELL</code>：新的默认 SHELL</li>
<li><code>-c &quot;COMMENT&quot;</code>：新的注释信息</li>
<li><code>-d HOME</code>：新家目录不会自动创建；若要创建新家目录并移动原家数据，同时使用 <code>-m</code> 选项</li>
<li><code>-l login_name</code>：修改用户登录名</li>
<li><code>-L</code>：锁定指定用户，在 /etc/shadow 密码栏增加!</li>
<li><code>-U</code>：解锁指定用户，将 /etc/shadow 密码栏的!拿掉</li>
<li><code>-e YYYY-MM-DD</code>：指明用户帐号过期日期</li>
<li><code>-f INACTIVE</code>：设定非活动期限</li>
</ul>
<p>清空附加组</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">usermod -G <span class="s2">&#34;&#34;</span> 用户名
</span></span><span class="line"><span class="cl">或
</span></span><span class="line"><span class="cl">usermod -G 用户主组 用户名
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>密码处的 <code>!!</code> 代表锁定，redhat5 版本之前可以使用 <code>usermod -U</code> 将用户密码解锁，如果用户密码为空，则不使用密码即可登录系统。</p>
<h4 id="userdel"><a href="#userdel" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:userdel" class="headings">userdel</a></h4>
<p>删除用户 <code>userdel [OPTION]...</code> 用户名</p>
<ul>
<li>
<p><code>-r</code>：删除用户相关文件</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">例如：
</span></span><span class="line"><span class="cl">家目录：/home/用户名
</span></span><span class="line"><span class="cl">邮箱目录：/var/spool/mail/用户名
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<h3 id="组帐号维护命令"><a href="#组帐号维护命令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:组帐号维护命令" class="headings">组帐号维护命令</a></h3>
<h4 id="groupadd"><a href="#groupadd" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:groupadd" class="headings">groupadd</a></h4>
<p>创建组：<code>groupadd [OPTION]... group_name</code></p>
<ul>
<li>
<p><code>-g GID</code>：指明 GID 号; [GID_MIN,GID_MAX]</p>
</li>
<li>
<p><code>-r</code>：创建系统组</p>
<blockquote>
<p>CentOS6：GID&lt;500</p>
<p>CentOS7：GID&lt;1000</p>
</blockquote>
</li>
</ul>
<h4 id="groupmod"><a href="#groupmod" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:groupmod" class="headings">groupmod</a></h4>
<p>组属性修改：<code>groupmod [OPTION]... group</code></p>
<ul>
<li><code>-n group_name</code>：新名字</li>
<li><code>-g GID</code>：新的 GID</li>
</ul>
<h4 id="groupdel"><a href="#groupdel" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:groupdel" class="headings">groupdel</a></h4>
<p>删除组：<code>groupdel GROUP</code></p>
<p><strong>主组不能被删除</strong></p>
<h2 id="查看用户相关的-id-信息"><a href="#查看用户相关的-id-信息" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:查看用户相关的-id-信息" class="headings">查看用户相关的 ID 信息</a></h2>
<p><code>id [OPTION]... [USER]</code></p>
<ul>
<li><code>-u</code>：显示 UID</li>
<li><code>-g</code>：显示 GID</li>
<li><code>-G</code>：显示用户所属的组的 ID</li>
<li><code>-n</code>：显示名称，需配合 ugG 使用</li>
</ul>
<h2 id="切换用户或以其他用户身份执行命令"><a href="#切换用户或以其他用户身份执行命令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:切换用户或以其他用户身份执行命令" class="headings">切换用户或以其他用户身份执行命令</a></h2>
<p><code>su</code>：switch user</p>
<ul>
<li>命令：
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su <span class="o">[</span>OPTIONS...<span class="o">]</span> <span class="o">[</span>-<span class="o">]</span> <span class="o">[</span>user <span class="o">[</span>agrs...<span class="o">]]</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>切换用户的方式
<ul>
<li><code>su UserName</code>：非登录式切换，即不会读取目标用户的配置文件，不改变当前工作目录</li>
<li><code>su - UserName</code>：登录式切换，会读取目标用户的配置文件，切换至家目录，完全切换</li>
</ul>
</li>
<li>root <code>su</code> 至其他用户无须密码；非 root 用户切换时需要密码</li>
<li>换个身份执行命令
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su <span class="o">[</span>-<span class="o">]</span> UserName -c <span class="s1">&#39;COMMAND&#39;</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>选项：<code>-l --login</code>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su -l UserName 相当于 su - UserName
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<h2 id="设置密码"><a href="#设置密码" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:设置密码" class="headings">设置密码</a></h2>
<p>修改指定用户的密码：<code>passwd [OPTION] UserName</code></p>
<ul>
<li><code>-d</code>：删除指定用户密码</li>
<li><code>-l</code>：锁定指定用户</li>
<li><code>-u</code>：解锁指定用户</li>
<li><code>-e</code>：强制用户下次登录修改密码</li>
<li><code>-f</code>：强制操作</li>
<li><code>-n mindays</code>：指定最短使用期限</li>
<li><code>-x maxdays</code>：指定最大使用期限</li>
<li><code>-w warndays</code>：提前多少天开始警告</li>
<li><code>-i inactivedays</code>：非活动期限</li>
<li><code>--stdin</code>：从标准输入接收用户密码
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;PASSWORD&#34;</span> <span class="p">|</span> passwd --stdin USERNAME
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<h2 id="修改用户密码策略"><a href="#修改用户密码策略" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:修改用户密码策略" class="headings">修改用户密码策略</a></h2>
<p>命令：<code>chage [OPTION]... 用户名</code></p>
<ul>
<li><code>-d LAST_DAY</code></li>
<li><code>-E --expiredate EXPIRE_DATE</code></li>
<li><code>-I --inactive INACTIVE</code></li>
<li><code>-m --mindays MIN_DAYS</code></li>
<li><code>-M --maxdays MAX_DAYS</code></li>
<li><code>-W --warndays WARN_DAYS</code></li>
<li><code>-l</code> 显示密码策略</li>
</ul>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chage -d <span class="m">0</span> tom 下次登录强制重设密码
</span></span><span class="line"><span class="cl">chage -m <span class="m">0</span> -M <span class="m">42</span> -W <span class="m">14</span> -l <span class="m">7</span> tom
</span></span><span class="line"><span class="cl">chage -E 2016-09-10 tom
</span></span></code></pre></td></tr></table></div>
</div>
</div><h2 id="用户相关的其他命令"><a href="#用户相关的其他命令" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:用户相关的其他命令" class="headings">用户相关的其他命令</a></h2>
<ul>
<li><code>chfn</code> 指定个人信息</li>
<li><code>chsh</code> 指定 shell</li>
<li><code>finger</code> 查看个人信息</li>
</ul>
<h2 id="更改组密码"><a href="#更改组密码" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:更改组密码" class="headings">更改组密码</a></h2>
<p>组密码：<code>gpasswd [OPTION] GROUP</code></p>
<ul>
<li><code>-a user</code>：将 user 添加到指定组中</li>
<li><code>-d user</code>：从指定组中移除用户 user</li>
<li><code>-A user1,user2,...</code> 设置有管理权限的用户列表</li>
</ul>
<p>临时切换主组：<code>newgrp 组名</code></p>
<blockquote>
<p>如果用户本不属于此组，则需要组密码</p>
</blockquote>
<h2 id="更改和查看组成员"><a href="#更改和查看组成员" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:更改和查看组成员" class="headings">更改和查看组成员</a></h2>
<p><code>groupmems [OPTIONS] [ACIONS]</code></p>
<ul>
<li>OPTIONS：
<ul>
<li><code>-g</code>, <code>--group</code> <code>groupname</code>：更改为指定组（只有 root）</li>
</ul>
</li>
<li>ACTIONS：
<ul>
<li><code>-a</code>, <code>--add</code> <code>username</code>：指定用户加入组</li>
<li><code>-d</code>, <code>--delete</code> <code>username</code>：从组中删除用户</li>
<li><code>-p</code>, <code>--purge</code>：从组中清除所有成员</li>
<li><code>-l</code>, <code>--list</code>：显示组成员列表</li>
</ul>
</li>
</ul>
<p>显示用户所属组列表：<code>groups [OPTION]... [USERNAME]...</code></p>
<h2 id="文件属性"><a href="#文件属性" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件属性" class="headings">文件属性</a></h2>
<p><img src="https://oss.intelli.icu/images/2021/20210607235728.png-watermark" alt="image"></p>
<h3 id="文件属性操作"><a href="#文件属性操作" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件属性操作" class="headings">文件属性操作</a></h3>
<p><strong>设置文件的所有者</strong>：</p>
<ul>
<li>格式：
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chown <span class="o">[</span>OPTION<span class="o">]</span>... <span class="o">[</span>OWNER<span class="o">][</span>:<span class="o">[</span>GROUP<span class="o">]]</span> FILE...
</span></span><span class="line"><span class="cl">chown <span class="o">[</span>OPTION<span class="o">]</span>... --reference<span class="o">=</span>RFILE FILE...
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>选项：
<ul>
<li><code>-R</code>：递归</li>
</ul>
</li>
<li>示例：
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chown wang xxx.txt 将 xxx.txt 的所有者设置为 wang 用户
</span></span><span class="line"><span class="cl">chown wang:root xxx.txt 将 xxx.txt 的所有者设置为wang用户，所属组设置为 root
</span></span><span class="line"><span class="cl">chown --reference<span class="o">=</span>/etc/passwd xxx.txt 将 xxx.txt 的所有者和所属组修改为与 /etc/passwd 一样
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<p><strong>设置文件的所属组信息</strong>：</p>
<ul>
<li>格式：
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chgrp <span class="o">[</span>OPTION<span class="o">]</span>... GROUP FILE...
</span></span><span class="line"><span class="cl">chgrp <span class="o">[</span>OPTION<span class="o">]</span>... --reference<span class="o">=</span>RFILE FILE...
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>选项：
<ul>
<li><code>-R</code>：递归</li>
</ul>
</li>
<li>示例：
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chgrp wang xxx.txt 将 xxx.txt 的所属组设置为 wang
</span></span><span class="line"><span class="cl">chgrp --reference<span class="o">=</span>/etc/passwd xxx.txt 将 xxx.txt 的所属组修改为与 /etc/passwd 一样
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<h2 id="文件权限"><a href="#文件权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件权限" class="headings">文件权限</a></h2>
<h3 id="文件权限-1"><a href="#文件权限-1" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件权限-1" class="headings">文件权限</a></h3>
<h4 id="文件的权限主要针对三类对象进行定义"><a href="#文件的权限主要针对三类对象进行定义" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件的权限主要针对三类对象进行定义" class="headings">文件的权限主要针对三类对象进行定义</a></h4>
<ul>
<li>owner：所有者，u</li>
<li>group：所属组，g</li>
<li>other：其他，o</li>
</ul>
<h4 id="每个文件针对每类访问者都定义了三种权限"><a href="#每个文件针对每类访问者都定义了三种权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:每个文件针对每类访问者都定义了三种权限" class="headings">每个文件针对每类访问者都定义了三种权限</a></h4>
<ul>
<li>r：Readable，可读</li>
<li>w：Writable，可写</li>
<li>x：eXcutable，可执行</li>
</ul>
<h4 id="文件的权限"><a href="#文件的权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:文件的权限" class="headings">文件的权限</a></h4>
<ul>
<li>r：read，读，可使用文件查看类工具获取其内容</li>
<li>w：write，写，可修改其内容</li>
<li>x：excute，可执行，可以把此文件提请内核启动为一个进程</li>
</ul>
<h4 id="目录的权限"><a href="#目录的权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:目录的权限" class="headings">目录的权限</a></h4>
<ul>
<li>r：read，读，可是使用 ls 查看此目录中文件列表</li>
<li>w：write，写，可以对目录下的文件进行增删（必须同时有 x 权限）</li>
<li>x：excute，可执行，可以使用 <code>ls -l</code> 查看此目录中文件元数据（须配合 <code>r</code>），可以 cd 进入此目录</li>
<li>X：只给目录 x 权限，不给文件 x 权限</li>
</ul>
<h2 id="八进制数字"><a href="#八进制数字" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:八进制数字" class="headings">八进制数字</a></h2>
<div class="table-container"><table>
<thead>
<tr>
<th>字母表示</th>
<th>二进制数字</th>
<th>八进制数字</th>
</tr>
</thead>
<tbody>
<tr>
<td>---</td>
<td>000</td>
<td>0</td>
</tr>
<tr>
<td>--x</td>
<td>001</td>
<td>1</td>
</tr>
<tr>
<td>-w-</td>
<td>010</td>
<td>2</td>
</tr>
<tr>
<td>-wx</td>
<td>011</td>
<td>3</td>
</tr>
<tr>
<td>r--</td>
<td>100</td>
<td>4</td>
</tr>
<tr>
<td>r-x</td>
<td>101</td>
<td>5</td>
</tr>
<tr>
<td>rw-</td>
<td>110</td>
<td>6</td>
</tr>
<tr>
<td>rwx</td>
<td>111</td>
<td>7</td>
</tr>
</tbody>
</table></div>
<p><strong>示例</strong>：</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">640</span> : rw-r-----
</span></span><span class="line"><span class="cl"><span class="m">755</span> : rwxr-xr-x
</span></span><span class="line"><span class="cl"><span class="m">777</span> : rwxrwxrwx
</span></span></code></pre></td></tr></table></div>
</div>
</div><h2 id="修改文件权限"><a href="#修改文件权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:修改文件权限" class="headings">修改文件权限</a></h2>
<p><strong>文件权限（rwx|X）</strong></p>
<p><img src="https://oss.intelli.icu/images/2021/20210607235729.png-watermark" alt="image"></p>
<p>此处的 X 表示，只对目录和包含执行权限的文件赋予可执行（x）权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ll data</span>
</span></span><span class="line"><span class="cl">total <span class="m">0</span>
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">0</span> Feb  <span class="m">6</span> 22:04 aaa
</span></span><span class="line"><span class="cl">-rwxr--r--. <span class="m">1</span> root root <span class="m">0</span> Feb  <span class="m">6</span> 22:04 bbb
</span></span><span class="line"><span class="cl">drwxr-xr-x. <span class="m">2</span> root root <span class="m">6</span> Feb  <span class="m">6</span> 22:04 ccc
</span></span><span class="line"><span class="cl">drw-r--r--. <span class="m">2</span> root root <span class="m">6</span> Feb  <span class="m">6</span> 22:04 ddd
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># chmod -R a=rwX data</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ll data</span>
</span></span><span class="line"><span class="cl">total <span class="m">0</span>
</span></span><span class="line"><span class="cl">-rw-rw-rw-. <span class="m">1</span> root root <span class="m">0</span> Feb  <span class="m">6</span> 22:04 aaa
</span></span><span class="line"><span class="cl">-rwxrwxrwx. <span class="m">1</span> root root <span class="m">0</span> Feb  <span class="m">6</span> 22:04 bbb
</span></span><span class="line"><span class="cl">drwxrwxrwx. <span class="m">2</span> root root <span class="m">6</span> Feb  <span class="m">6</span> 22:04 ccc
</span></span><span class="line"><span class="cl">drwxrwxrwx. <span class="m">2</span> root root <span class="m">6</span> Feb  <span class="m">6</span> 22:04 ddd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">aaa 文件不包含 x 权限，所以执行命令后依旧没有 x 权限
</span></span><span class="line"><span class="cl">bbb 文件在包含可执行权限，所以执行命令后包含可执行权限
</span></span><span class="line"><span class="cl">ccc 和 ddd 是目录，所以执行命令后，均包含可执行权限
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><strong>命令格式</strong>：</p>
<p>语法：<code>chmod [OPTION]... MODE[,MODE]... FILE...</code></p>
<p>选项：</p>
<ul>
<li><code>-R</code>：递归修改权限</li>
</ul>
<p>MODE：</p>
<ul>
<li>修改一类用户的所有权限
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">u</span><span class="o">=</span>：所有者
</span></span><span class="line"><span class="cl"><span class="nv">g</span><span class="o">=</span>：所属组用户
</span></span><span class="line"><span class="cl"><span class="nv">o</span><span class="o">=</span>：其他用户
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span>：所有用户
</span></span><span class="line"><span class="cl"><span class="nv">ug</span><span class="o">=</span>：所有者和所属组
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>修改一类用户某位或某些位权限
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">u+ u-：为所有者增加或删除某个或某些权限
</span></span><span class="line"><span class="cl">g+ g-：为所属组用户增加或删除某个或某些权限
</span></span><span class="line"><span class="cl">o+ o-：为其他用户增加或删除某个或某些权限
</span></span><span class="line"><span class="cl">a+ a-：为所有用户增加或删除某个或某些权限
</span></span><span class="line"><span class="cl">+ -：为所有用户增加或删除某个或某些权限
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<p><code>chmod [OPTION]... OCTAL-MODE FILE...</code></p>
<ul>
<li>使用数字的方式修改文件的权限</li>
</ul>
<p><code>chmod [OPTION]... --reference=RFILE FILE...</code></p>
<ul>
<li>参考 RFILE 文件的权限，将 FILE 的权限修改为同 RFILE 一样</li>
</ul>
<p><strong>对文件进行读/写/执行操作时，权限的匹配顺序是 所有者权限 -&gt; 所属组权限 -&gt; 其他用户权限，一旦匹配成功，则不像下一级进行匹配</strong></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">-----w-rw-. <span class="m">1</span> wang duan <span class="m">0</span> Feb  <span class="m">6</span> 22:04 aaa
</span></span><span class="line"><span class="cl">wang 用户对 aaa 文件不能读/写/执行
</span></span><span class="line"><span class="cl">属于duan组的用户只能对aaa进行写
</span></span><span class="line"><span class="cl">其他用户可以对该文件进行读写
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">duan用户属于duan组，则duan用户只能对aaa进行写操作
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wang用户可以使用chmod修改该文件的权限
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><strong>可以只有写权限，没有读权限，通过 <code>echo xxx &gt;&gt; file</code> 向 file 中追加 xxx</strong></p>
<p><strong>如果要删除文件，必须对文件所在目录有写权限</strong></p>
<p><strong>root 用户没有读写权限也可以读写，root 用户没有执行权限也不能执行</strong></p>
<h2 id="默认权限设置"><a href="#默认权限设置" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:默认权限设置" class="headings">默认权限设置</a></h2>
<p>新建文件的最大权限为 666，为了防止新建的文件带有可执行权限，新建文件夹的最大权限为 777</p>
<p><strong>umask + 默认权限 = 最大权限</strong></p>
<p><strong>底层计算方法</strong></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">umask</span> 为123，创建文件，计算文件的默认权限
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">文件的最大权限 666：     <span class="m">110110110</span>
</span></span><span class="line"><span class="cl"><span class="nb">umask</span> 为 321：           <span class="m">101010001</span>
</span></span><span class="line"><span class="cl">                         -----------
</span></span><span class="line"><span class="cl">666-321<span class="o">=</span>234，真实结果为：010100110  -&gt; <span class="m">246</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">由上，默认权限为246
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">umask</span> 为 <span class="m">1</span> 的位会遮掩原来的值，变为为 0，umask 为 0的位，结果不变。
</span></span></code></pre></td></tr></table></div>
</div>
</div><ul>
<li>
<p>umask 值 可以用来保存新建文件或目录时的默认权限</p>
</li>
<li>
<p>新建 FILE 权限：666-umask</p>
<p>如果所得结果某位存在执行（奇数）权限，则将其权限 +1</p>
</li>
<li>
<p>新建 DIR 权限：777-umask</p>
</li>
<li>
<p>非特权用户 umask 默认是 002</p>
</li>
<li>
<p>root 的 umask 默认是 022</p>
</li>
<li>
<p>查看 umask：<code>umask</code></p>
</li>
<li>
<p>设置 umask：<code>umask [-p] [-S] [mode]</code></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">示例：
</span></span><span class="line"><span class="cl"><span class="nb">umask</span> <span class="m">002</span>
</span></span><span class="line"><span class="cl"><span class="nb">umask</span> <span class="nv">u</span><span class="o">=</span>rw <span class="nv">g</span><span class="o">=</span>r <span class="nv">o</span><span class="o">=</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>模式方式显示：<code>umask -S</code></p>
<p>使用字母的方式，显示新建文件夹的默认权限</p>
</li>
<li>
<p>输出可被调用：<code>umask -p</code></p>
<p>输出：umask 0102</p>
<p>可将其直接重定向到配置文件中：<code>umask -p &gt;&gt; ~/.bashrc</code></p>
</li>
<li>
<p>全局配置文件：/etc/bashrc</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$UID</span> -gt <span class="m">199</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&#34;`/usr/bin/id -gn`&#34;</span> <span class="o">=</span> <span class="s2">&#34;`/usr/bin/id -un`&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">umask</span> <span class="m">002</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">   <span class="nb">umask</span> <span class="m">022</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>用户配置文件：~/.bashrc</p>
</li>
</ul>
<h2 id="权限相关练习"><a href="#权限相关练习" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:权限相关练习" class="headings">权限相关练习</a></h2>
<ol>
<li>
<p>当用户 docker 对 /testdir 目录无执行权限时，意味着无法做哪些操作</p>
<p>无法cd，如果有读权限可以使用ll查看文件</p>
</li>
<li>
<p>当用户 mongodb 对 /testdir 目录无读取权限时，意味着无法做哪些操作</p>
</li>
<li>
<p>当用户 redis 对 /testdir 目录无写权限时，该目录下的只读文件 file1 是否可以修改和删除</p>
</li>
<li>
<p>当用户 zabbix 对 /testdir 目录有写和执行权限时，该目录下的只读文件 file1 是否可修改和删除</p>
</li>
<li>
<p>复制 /etc/fstab 文件到 /var/tmp 下，设置文件所有者为 tomcat 读写权限，所属组为 apps 组有读写权限，其他人无权限</p>
</li>
<li>
<p>无删除了用户 git 的家目录，请重新创建并恢复该家目录及相应权限属性</p>
</li>
</ol>
<p><strong>程序运行说明</strong></p>
<p>安全上下文</p>
<p>前提：进程有属主和属组; 文件有属主和属组</p>
<ol>
<li>任何一个可执行程序文件能不能启动为进程，取决于发起者对程序文件是否拥有执行权限</li>
<li>启动为进程后，其进程的属主为发起者，进程的属组为发起者所属的组</li>
<li>进程访问文件时的权限，取决于进程的发起者
<ol>
<li>进程的发起者，同文件的属主：则应用文件属主权限</li>
<li>进程的发起者，属于文件属组：则应用文件属组权限</li>
<li>应用文件“其他”权限</li>
</ol>
</li>
</ol>
<h2 id="linux文件系统上的特殊权限"><a href="#linux文件系统上的特殊权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:linux文件系统上的特殊权限" class="headings">Linux文件系统上的特殊权限</a></h2>
<h3 id="三种特殊权限"><a href="#三种特殊权限" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:三种特殊权限" class="headings">三种特殊权限</a></h3>
<ol>
<li>SUID：一个二进制程序包含 SUID，则任何用户执行时都会继承该二进制程序所有者的身份，获得它的权限</li>
</ol>
<ul>
<li>
<p>作用目标：</p>
<ul>
<li>仅二进制程序</li>
</ul>
</li>
<li>
<p>位置：user，占据属主的执行权限位</p>
<ul>
<li>s：属主拥有x权限</li>
<li>S：属主没有x权限</li>
</ul>
</li>
<li>
<p>场景：普通用户无法修改 /etc/shadow文件，却可以使用 passwd 命令修改自己的密码，对 /etc/shadow 文件造成修改。</p>
</li>
<li>
<p>原因：因为 passwd 程序包含 SUID 权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ll /usr/bin/passwd</span>
</span></span><span class="line"><span class="cl">-rwsr-xr-x. <span class="m">1</span> root root <span class="m">27856</span> Aug  <span class="m">9</span> 09:39 /usr/bin/passwd
</span></span></code></pre></td></tr></table></div>
</div>
</div><p>注意所属用户的执行权限 x 变为了 s，代表具有 SUID 权限。带有 SUID 权限的程序，任何用户在执行时，都会继承该二进制程序所有者的身份，passwd 程序的所有者为 root，对 /etc/passwd 可以读写，因此其他用户可以使用 passwd 程序对 passwd 文件进行修改。</p>
</li>
<li>
<p>添加和删除 SUID 权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">添加SUID权限
</span></span><span class="line"><span class="cl">chmod u+s /bin/cat
</span></span><span class="line"><span class="cl">chmod <span class="m">4755</span> /bin/cat <span class="c1"># 4 代表添加 suid 权限</span>
</span></span><span class="line"><span class="cl">删除SUID权限
</span></span><span class="line"><span class="cl">chmod u-s /bin/cat
</span></span><span class="line"><span class="cl">chmod <span class="m">755</span> /bin/cat
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>其他说明</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ll /bin/cat</span>
</span></span><span class="line"><span class="cl">-rwxr-xr-x. <span class="m">1</span> root root <span class="m">54080</span> Aug <span class="m">20</span> 14:25 /bin/cat
</span></span><span class="line"><span class="cl"><span class="c1"># 为 cat 程序添加 SUID 权限</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># chmod u+s /bin/cat</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ll /bin/cat</span>
</span></span><span class="line"><span class="cl">-rwsr-xr-x. <span class="m">1</span> root root <span class="m">54080</span> Aug <span class="m">20</span> 14:25 /bin/cat
</span></span><span class="line"><span class="cl"><span class="c1"># 删除cat程序的可执行x权限</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># chmod u-x /bin/cat</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 会发现 s 变为了 S，此时 root 用户不具备可执行权限</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># ll /bin/cat</span>
</span></span><span class="line"><span class="cl">-rwSr-xr-x. <span class="m">1</span> root root <span class="m">54080</span> Aug <span class="m">20</span> 14:25 /bin/cat
</span></span><span class="line"><span class="cl">而 root 用户依旧可以使用 cat 命令查看 /etc/passwd，是因为 root 用户在 root 组中，root 组具备 cat 程序的执行权限
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<ol start="2">
<li>SGID：</li>
</ol>
<ul>
<li>
<p>位置：group，占据属组的执行权限位</p>
<ul>
<li>s：group拥有x权限</li>
<li>S：group没有x权限</li>
</ul>
</li>
<li>
<p>作用目标：</p>
<ul>
<li>
<p>二进制程序</p>
<p>一个二进制程序包含 SGID，则任何用户执行时都会继承该二进制程序所属组的身份，获得所属组权限</p>
</li>
<li>
<p>文件夹</p>
<p>默认情况下，用户创建文件时，其属组为此用户所属的主组，一旦某目录设定了 SGID 权限，则对此目录有写权限的用户在此目录中创建的文件所属的组为此目录的所属组</p>
<ul>
<li>
<p>使用场景：通常用于创建一个协作目录</p>
<p>wang 用户和 duan 用户在做同一个项目，项目文件均放在 web 目录下，两用户均需要对 web 目录下的文件进行修改，此时可以创建一个 web 组，将 wang 和 duan 均加入该组，修改 web 目录数据 web 组，对其设置 SGID，此时，wang 和 duan创建的文件默认所属组均会变为 web，则两用户均可以通过组权限对对方的文件进行修改。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>添加和删除 SUID 权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">添加SGID权限
</span></span><span class="line"><span class="cl">chmod g+s /bin/cat
</span></span><span class="line"><span class="cl">chmod <span class="m">2755</span> /bin/cat <span class="c1"># 2 代表添加 sgid 权限</span>
</span></span><span class="line"><span class="cl">删除SGID权限
</span></span><span class="line"><span class="cl">chmod g-s /bin/cat
</span></span><span class="line"><span class="cl">chmod <span class="m">755</span> /bin/cat
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><strong><code>chmod 6755 /bin/cat</code>，6 代表添加 SUID 和 SGID 权限。</strong></p>
</li>
</ul>
<ol start="3">
<li>Sticky：对目录具有写权限的用户，通常可以删除该目录中的任何文件，无论该文件的权限或拥有权。在目录设置 Sticky 位，只有文件的所有者或root 可以删除该文件。Sticky 设置在文件上无意义</li>
</ol>
<ul>
<li>
<p>作用目标：</p>
<ul>
<li>仅文件夹</li>
</ul>
</li>
<li>
<p>位置：other，占据 other 的执行权限位</p>
<ul>
<li>t：other 拥有 x 权限</li>
<li>T：other 没有 x 权限</li>
</ul>
</li>
<li>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost data<span class="o">]</span><span class="c1"># ll -d /tmp</span>
</span></span><span class="line"><span class="cl">drwxrwxrwt. <span class="m">8</span> root root <span class="m">211</span> Feb  <span class="m">7</span> 11:16 /tmp
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>添加和删除 Sticky 权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">添加 Sticky 权限
</span></span><span class="line"><span class="cl">chmod o+t ~/data <span class="c1"># t 代表 Sticky 权限</span>
</span></span><span class="line"><span class="cl">chmod <span class="m">1777</span> ~/data <span class="c1"># 1 代表 Sticky 权限</span>
</span></span><span class="line"><span class="cl">删除 Sticky 权限
</span></span><span class="line"><span class="cl">chmod o-t ~/data
</span></span><span class="line"><span class="cl">chmod <span class="m">777</span> ~/data
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
<h3 id="特殊权限数字法"><a href="#特殊权限数字法" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:特殊权限数字法" class="headings">特殊权限数字法</a></h3>
<div class="table-container"><table>
<thead>
<tr>
<th>SUID</th>
<th>SGID</th>
<th>STICKY</th>
<th>八进制和</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
<td>6</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>7</td>
</tr>
</tbody>
</table></div>
<p>示例 :</p>
<pre tabindex="0"><code>chmod 4777 /tmp/a.txt
</code></pre><h2 id="设定文件特定属性"><a href="#设定文件特定属性" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:设定文件特定属性" class="headings">设定文件特定属性</a></h2>
<p>该属性属于扩展属性，存储在元数据中</p>
<ul>
<li>
<p><code>chattr +i filename</code> : 不能删除，改名，更改</p>
</li>
<li>
<p><code>chattr +a filename</code> : 只能追加内容</p>
</li>
<li>
<p><code>lsattr filename</code> : 显示特定属性</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost webdir<span class="o">]</span><span class="c1"># lsattr wang1</span>
</span></span><span class="line"><span class="cl">----i----------- wang1
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p><code>chattr -i filename</code> : 删除i属性</p>
</li>
<li>
<p><code>chattr -a filename</code> : 删除a属性</p>
</li>
</ul>
<p><strong>该操作对 root 帐号也会生效</strong></p>
<h2 id="访问控制列表"><a href="#访问控制列表" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:访问控制列表" class="headings">访问控制列表</a></h2>
<p>因为普通的权限设置只能对所属者，所属组，其他用户进行权限设置，无法细粒度的进行权限控制，例如对 tom 用户设置特定不同于 other 用户的权限，这是做不到的，所以引入了访问控制列表技术。</p>
<ul>
<li>
<p>访问控制列表 : ACL，Access Control List，实现灵活的权限管理</p>
</li>
<li>
<p>除了文件的所有者，所属组和其他人，可以对更多的用户设置权限</p>
</li>
<li>
<p>CentOS7 默认创建的 xfs 和 ext4 文件系统具有 ACL 功能</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">查看文件系统格式
</span></span><span class="line"><span class="cl">df -T
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>CentOS7 之前版本，默认手工创建的 ext4 文件系统无 ACL 功能，需手动地添加</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tune2fs -o acl /dev/sdb1
</span></span><span class="line"><span class="cl">mount -o acl /dev/sdb1 /mnt/test
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>查看分区是否支持 ACL 权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tune2fs -l /dev/sda1
</span></span><span class="line"><span class="cl"><span class="c1"># 只对 ext 系列生效</span>
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>查看文件是否包含 ACL 权限</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost data<span class="o">]</span><span class="c1"># ll f1</span>
</span></span><span class="line"><span class="cl">-rw-r--r--+ <span class="m">1</span> root root <span class="m">0</span> Feb  <span class="m">7</span> 22:40 f1
</span></span></code></pre></td></tr></table></div>
</div>
</div><p><strong>+ 号代表该文件包含 ACL 权限</strong></p>
</li>
<li>
<p>ACL 相关命令</p>
</li>
<li>
<ul>
<li>
<p>查看 ACL 权限信息（get file access control list）</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Usage: getfacl <span class="o">[</span>-aceEsRLPtpndvh<span class="o">]</span> file ...
</span></span><span class="line"><span class="cl">-a,  --access           display the file access control list only
</span></span><span class="line"><span class="cl">-d, --default           display the default access control list only
</span></span><span class="line"><span class="cl">-c, --omit-header       <span class="k">do</span> not display the comment header
</span></span><span class="line"><span class="cl">-e, --all-effective     print all effective rights
</span></span><span class="line"><span class="cl">-E, --no-effective      print no effective rights
</span></span><span class="line"><span class="cl">-s, --skip-base         skip files that only have the base entries
</span></span><span class="line"><span class="cl">-R, --recursive         recurse into subdirectories
</span></span><span class="line"><span class="cl">-L, --logical           logical walk, follow symbolic links
</span></span><span class="line"><span class="cl">-P, --physical          physical walk, <span class="k">do</span> not follow symbolic links
</span></span><span class="line"><span class="cl">-t, --tabular           use tabular output format
</span></span><span class="line"><span class="cl">-n, --numeric           print numeric user/group identifiers
</span></span><span class="line"><span class="cl">-p, --absolute-names    don<span class="s1">&#39;t strip leading &#39;</span>/<span class="err">&#39;</span> in pathnames
</span></span><span class="line"><span class="cl">-v, --version           print version and <span class="nb">exit</span>
</span></span><span class="line"><span class="cl">-h, --help              this <span class="nb">help</span> text
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>设置 ACL 权限（set file access control list）</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Usage: setfacl <span class="o">[</span>-bkndRLP<span class="o">]</span> <span class="o">{</span> -m<span class="p">|</span>-M<span class="p">|</span>-x<span class="p">|</span>-X ... <span class="o">}</span> file ...
</span></span><span class="line"><span class="cl">-m, --modify<span class="o">=</span>acl        modify the current ACL<span class="o">(</span>s<span class="o">)</span> of file<span class="o">(</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl">-M, --modify-file<span class="o">=</span>file  <span class="nb">read</span> ACL entries to modify from file
</span></span><span class="line"><span class="cl">-x, --remove<span class="o">=</span>acl        remove entries from the ACL<span class="o">(</span>s<span class="o">)</span> of file<span class="o">(</span>s<span class="o">)</span>
</span></span><span class="line"><span class="cl">-X, --remove-file<span class="o">=</span>file  <span class="nb">read</span> ACL entries to remove from file
</span></span><span class="line"><span class="cl">-b, --remove-all        remove all extended ACL entries
</span></span><span class="line"><span class="cl">-k, --remove-default    remove the default ACL
</span></span><span class="line"><span class="cl">  --set<span class="o">=</span>acl           <span class="nb">set</span> the ACL of file<span class="o">(</span>s<span class="o">)</span>, replacing the current ACL
</span></span><span class="line"><span class="cl">  --set-file<span class="o">=</span>file     <span class="nb">read</span> ACL entries to <span class="nb">set</span> from file
</span></span><span class="line"><span class="cl">  --mask              <span class="k">do</span> recalculate the effective rights mask
</span></span><span class="line"><span class="cl">-n, --no-mask           don<span class="s1">&#39;t recalculate the effective rights mask
</span></span></span><span class="line"><span class="cl"><span class="s1">-d, --default           operations apply to the default ACL
</span></span></span><span class="line"><span class="cl"><span class="s1">-R, --recursive         recurse into subdirectories
</span></span></span><span class="line"><span class="cl"><span class="s1">-L, --logical           logical walk, follow symbolic links
</span></span></span><span class="line"><span class="cl"><span class="s1">-P, --physical          physical walk, do not follow symbolic links
</span></span></span><span class="line"><span class="cl"><span class="s1">  --restore=file      restore ACLs (inverse of `getfacl -R&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  --test              <span class="nb">test</span> mode <span class="o">(</span>ACLs are not modified<span class="o">)</span>
</span></span><span class="line"><span class="cl">-v, --version           print version and <span class="nb">exit</span>
</span></span><span class="line"><span class="cl">-h, --help              this <span class="nb">help</span> text
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>
</li>
<li>
<p>base ACL 不能删除</p>
</li>
<li>
<p>getfacl file1 | setfacl --set-file=- file2 : 赋值 file1 的 ACL 权限给 file2</p>
</li>
<li>
<p>ACL 权限显示说明</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost data<span class="o">]</span><span class="c1"># getfacl f1 </span>
</span></span><span class="line"><span class="cl"><span class="c1"># file: f1      文件名</span>
</span></span><span class="line"><span class="cl"><span class="c1"># owner: root   属主</span>
</span></span><span class="line"><span class="cl"><span class="c1"># group: root   属组</span>
</span></span><span class="line"><span class="cl">user::rw-       属主权限
</span></span><span class="line"><span class="cl">user:wang:rwx   wang用户的权限
</span></span><span class="line"><span class="cl">group::r--      属组权限
</span></span><span class="line"><span class="cl">group:duan:rw-  duan组的权限
</span></span><span class="line"><span class="cl">mask::r--       对应ll时，显示的组权限
</span></span><span class="line"><span class="cl">other::r--      其他用户的权限
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>ACL 生效顺序 : 所有者，自定义用户，自定义组，其他人</p>
</li>
<li>
<p>当一个用户属于多个自定义组，会具有多个自定义组的权限</p>
</li>
<li>
<p>为多用户或者组的文件和目录赋予访问权限 rwx</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mount -o acl /directory
</span></span><span class="line"><span class="cl"><span class="c1"># 查看 file|directory 的 ACL 权限</span>
</span></span><span class="line"><span class="cl">getfacl file<span class="p">|</span>directory
</span></span><span class="line"><span class="cl"><span class="c1"># 给 file|directory 添加 wang 用户的 rwx 权限</span>
</span></span><span class="line"><span class="cl">setfacl -m u:wang:rwx file<span class="p">|</span>directory
</span></span><span class="line"><span class="cl"><span class="c1"># 给 directory 递归添加 sales 组的 rwX 权限</span>
</span></span><span class="line"><span class="cl">setfacl -Rm g:sales:rwX directory
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 file.acl 为 file|directory 赋予批量权限</span>
</span></span><span class="line"><span class="cl">setfacl -M file.acl file<span class="p">|</span>directory
</span></span><span class="line"><span class="cl"><span class="c1"># 给 file|directory 添加 salesgroup 组的 rw 权限</span>
</span></span><span class="line"><span class="cl">setfacl -m g:salesgroup:rw file<span class="p">|</span>directory
</span></span><span class="line"><span class="cl"><span class="c1"># d，default: 设置以后在 directory 中新建的文件/目录都具有 u:wang:rx 的 acl 权限</span>
</span></span><span class="line"><span class="cl">setfacl -m d:u:wang:rx directory
</span></span><span class="line"><span class="cl"><span class="c1"># 删除 file|directory 对 wang 用户的 ACL 权限</span>
</span></span><span class="line"><span class="cl">setfacl -x u:wang file<span class="p">|</span>directory
</span></span><span class="line"><span class="cl"><span class="c1"># 对 directory 批量删除 file.acl 文件中记录的 ACL 权限</span>
</span></span><span class="line"><span class="cl">setfacl -X file.acl directory
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>ACL 文件上的 group 权限是 mask 值（自定义用户，自定义组，拥有组的最大权限），而非传统的组权限</p>
<p>如果使用了 ACL 权限，则会将 <code>ll file</code> 显示的传统属组权限修改为 ACL 权限中的 mask 值，此时使用 <code>chmod g=rw file</code> 修改的是 ACL 权限中的 mask 值，也可以通过 <code>setfacl -m mask::rw file</code> 来修改 ACL 权限中的 mask 值。</p>
<p>mask 值代表了所有 ACL 权限的最高权限，即，如果 mask::r，那么所有 ACL 权限都只能读，不能写和执行，效果如下方两处 <code>#effective:r--</code></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost data<span class="o">]</span><span class="c1"># setfacl -m mask::r f1</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@localhost data<span class="o">]</span><span class="c1"># getfacl f1 </span>
</span></span><span class="line"><span class="cl"><span class="c1"># file: f1</span>
</span></span><span class="line"><span class="cl"><span class="c1"># owner: root</span>
</span></span><span class="line"><span class="cl"><span class="c1"># group: root</span>
</span></span><span class="line"><span class="cl">user::rw-
</span></span><span class="line"><span class="cl">user:wang:rwx			<span class="c1">#effective:r--</span>
</span></span><span class="line"><span class="cl">group::rw-			    <span class="c1">#effective:r--</span>
</span></span><span class="line"><span class="cl">group:duan:rw-			<span class="c1">#effective:r--</span>
</span></span><span class="line"><span class="cl">mask::r--
</span></span><span class="line"><span class="cl">other::r--
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>mask 只影响除所有者和 other 之外的人和组的最大权限，mask需要与用户的权限进行逻辑与运算后，才能变成有限的权限（Effective Permission）
用户或组的设置必须存在于mask权限设定范围内才会生效</p>
</li>
<li>
<p><code>--set</code> 选项会把原有的 ACL 项都删除，用新的替代，需要注意的是一定要包含 UGO 的设置，不能像 <code>-m</code> 一样只是添加 ACL 就可以</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">示例 :
</span></span><span class="line"><span class="cl">setfacl --set u::rw,u:wang:rw,g::r,o::- file1
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
<li>
<p>备份和恢复 ACL</p>
<p>主要的文件操作命令 cp 和 mv 都支持 ACL，知识 cp 命令需要加上 <code>-p</code> 参数。但是 tar 等常见的备份工具是不会保留目录和文件的 ACL 信息。</p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 递归 /tmp/dir1 目录，将 ACL 信息保存到 acl.txt 文件中</span>
</span></span><span class="line"><span class="cl">getfacl -R /tmp/dir1 &gt; acl.txt
</span></span><span class="line"><span class="cl"><span class="c1"># 递归还原 /tmp/dir1 目录的 ACL 信息</span>
</span></span><span class="line"><span class="cl">setfacl -R -b /tmp/dir1
</span></span><span class="line"><span class="cl"><span class="c1"># 递归 /tmp/dir1 目录，恢复 acl.txt 中的 ACL 信息</span>
</span></span><span class="line"><span class="cl">setfacl -R --set-file<span class="o">=</span>acl.txt /tmp/dir1
</span></span><span class="line"><span class="cl"><span class="c1"># 还原 acl.txt 中记录的 ACL 信息</span>
</span></span><span class="line"><span class="cl">setfacl --restore acl.txt
</span></span><span class="line"><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="cl">getfacl -R /tmp/dir1
</span></span></code></pre></td></tr></table></div>
</div>
</div></li>
</ul>

            </div>

            
    
    
        <ul class="post-copyright">
            <li class="copyright-item author"><span class="copyright-item-text">作者</span>：<a href="https://blog.ws.lu/" class="p-author h-card" target="_blank" rel="noopener">王硕</a></li>
            
                
                
                
                
                <li class="copyright-item link"><span class="copyright-item-text">链接</span>：<a href="/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/" target="_blank" rel="noopener">https://blog.ws.lu/posts/linux/阿里云linux运维学习路线/阶段一-linux入门/linux-user-group-permission/</a></li>
            
            <li class="copyright-item license"><span class="copyright-item-text">许可</span>：本博客所有文章如无特别声明，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处 <a href="https://blog.ws.lu/" target="_blank" rel="noopener">王硕's Blog</a>。如有侵权，请联系删除。</li>
            
        </ul>
    



        </article>

        

        
    <div class="updated-badge-container">
        <span title="Updated @ 2023-03-14 17:04:55 CST" style="cursor:help">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2023-03-14</text><text x="915" y="140" textLength="650" transform="scale(.1)">2023-03-14</text></g></svg>
        </span></div>



        


        <div class="post-share">

        

        <div class="share-items">

            
                <div class="share-item twitter">
                    
                    <a href="https://twitter.com/share?url=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;text=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90&amp;hashtags=Linux,&amp;via=%25!s%28%3cnil%3e%29" title="分享到「Twitter」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon twitter-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a>
                </div>
            

            
                <div class="share-item facebook">
                    
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;hashtag=%23Linux" title="分享到「Facebook」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon facebook-icon"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></a>
                </div>
            

            
                <div class="share-item linkedin">
                    
                    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;title=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90&amp;summary=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90%20%e6%9c%ac%e7%ab%a0%e5%86%85%e5%ae%b9%20%e8%a7%a3%e9%87%8a%20Linux%20%e7%9a%84%e5%ae%89%e5%85%a8%e6%a8%a1%e5%9e%8b%20%e8%a7%a3%e9%87%8a%e7%94%a8%e6%88%b7%e5%b8%90%e5%8f%b7%e5%92%8c%e7%bb%84%e7%be%a4%e5%b8%90%e5%8f%b7%e7%9a%84%e7%9b%ae%e7%9a%84%20%e7%94%a8%e6%88%b7%e5%92%8c%e7%bb%84%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4%20%e7%90%86%e8%a7%a3%e5%b9%b6%e8%ae%be%e7%bd%ae%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%20%e9%bb%98%e8%ae%a4%e6%9d%83%e9%99%90%20%e7%89%b9%e6%ae%8a%e6%9d%83%e9%99%90%20ACL%20%e4%bb%8b%e7%bb%8d%e5%ae%89%e5%85%a8%203A%20%e8%b5%84%e6%ba%90%e5%88%86%e6%b4%be%ef%bc%9a%20Authentication%ef%bc%9a%e8%ae%a4%e8%af%81%20Authorization%ef%bc%9a%e6%8e%88%e6%9d%83%20Accounting%7cAudition%ef%bc%9a%e5%ae%a1%e8%ae%a1%20%e7%94%a8%e6%88%b7%20user%20%e4%bb%a4%e2%80%a6%e2%80%a6&amp;source=%e7%8e%8b%e7%a1%95%27s%20Blog" title="分享到「LinkedIn」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon linkedin-icon"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></a>
                </div>
            

            
                <div class="share-item telegram">
                    
                    <a href="https://t.me/share/url?url=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;text=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90" title="分享到「Telegram」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon telegram-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a>
                </div>
            

            
                <div class="share-item weibo">
                    
                    <a href="https://service.weibo.com/share/share.php?&amp;url=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;title=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90&amp;pic=https://oss.intelli.icu/images/2021/20210607235726.png-watermark&amp;searchPic=false" title="分享到「新浪微博」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon weibo-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a>
                </div>
            

            
                <div class="share-item douban">
                    
                    <a href="https://www.douban.com/share/service?href=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;name=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90&amp;text=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90%20%e6%9c%ac%e7%ab%a0%e5%86%85%e5%ae%b9%20%e8%a7%a3%e9%87%8a%20Linux%20%e7%9a%84%e5%ae%89%e5%85%a8%e6%a8%a1%e5%9e%8b%20%e8%a7%a3%e9%87%8a%e7%94%a8%e6%88%b7%e5%b8%90%e5%8f%b7%e5%92%8c%e7%bb%84%e7%be%a4%e5%b8%90%e5%8f%b7%e7%9a%84%e7%9b%ae%e7%9a%84%20%e7%94%a8%e6%88%b7%e5%92%8c%e7%bb%84%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4%20%e7%90%86%e8%a7%a3%e5%b9%b6%e8%ae%be%e7%bd%ae%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%20%e9%bb%98%e8%ae%a4%e6%9d%83%e9%99%90%20%e7%89%b9%e6%ae%8a%e6%9d%83%e9%99%90%20ACL%20%e4%bb%8b%e7%bb%8d%e5%ae%89%e5%85%a8%203A%20%e8%b5%84%e6%ba%90%e5%88%86%e6%b4%be%ef%bc%9a%20Authentication%ef%bc%9a%e8%ae%a4%e8%af%81%20Authorization%ef%bc%9a%e6%8e%88%e6%9d%83%20Accounting%7cAudition%ef%bc%9a%e5%ae%a1%e8%ae%a1%20%e7%94%a8%e6%88%b7%20user%20%e4%bb%a4%e2%80%a6%e2%80%a6" title="分享到「豆瓣」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon douban-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412l-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952 0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03Z"/></svg></a>
                </div>
            

            
                <div class="share-item qq">
                    
                    <a href="https://connect.qq.com/widget/shareqq/index.html?url=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;title=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90&amp;summary=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90%20%e6%9c%ac%e7%ab%a0%e5%86%85%e5%ae%b9%20%e8%a7%a3%e9%87%8a%20Linux%20%e7%9a%84%e5%ae%89%e5%85%a8%e6%a8%a1%e5%9e%8b%20%e8%a7%a3%e9%87%8a%e7%94%a8%e6%88%b7%e5%b8%90%e5%8f%b7%e5%92%8c%e7%bb%84%e7%be%a4%e5%b8%90%e5%8f%b7%e7%9a%84%e7%9b%ae%e7%9a%84%20%e7%94%a8%e6%88%b7%e5%92%8c%e7%bb%84%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4%20%e7%90%86%e8%a7%a3%e5%b9%b6%e8%ae%be%e7%bd%ae%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%20%e9%bb%98%e8%ae%a4%e6%9d%83%e9%99%90%20%e7%89%b9%e6%ae%8a%e6%9d%83%e9%99%90%20ACL%20%e4%bb%8b%e7%bb%8d%e5%ae%89%e5%85%a8%203A%20%e8%b5%84%e6%ba%90%e5%88%86%e6%b4%be%ef%bc%9a%20Authentication%ef%bc%9a%e8%ae%a4%e8%af%81%20Authorization%ef%bc%9a%e6%8e%88%e6%9d%83%20Accounting%7cAudition%ef%bc%9a%e5%ae%a1%e8%ae%a1%20%e7%94%a8%e6%88%b7%20user%20%e4%bb%a4%e2%80%a6%e2%80%a6&amp;pics=https://oss.intelli.icu/images/2021/20210607235726.png-watermark&amp;site=%e7%8e%8b%e7%a1%95%27s%20Blog" title="分享到「QQ」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qq-icon"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a>
                </div>
            

            
                <div class="share-item qzone">
                    
                    <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.ws.lu/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8/linux-user-group-permission/&amp;title=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90&amp;summary=%e7%94%a8%e6%88%b7%ef%bc%8c%e7%bb%84%e5%92%8c%e6%9d%83%e9%99%90%20%e6%9c%ac%e7%ab%a0%e5%86%85%e5%ae%b9%20%e8%a7%a3%e9%87%8a%20Linux%20%e7%9a%84%e5%ae%89%e5%85%a8%e6%a8%a1%e5%9e%8b%20%e8%a7%a3%e9%87%8a%e7%94%a8%e6%88%b7%e5%b8%90%e5%8f%b7%e5%92%8c%e7%bb%84%e7%be%a4%e5%b8%90%e5%8f%b7%e7%9a%84%e7%9b%ae%e7%9a%84%20%e7%94%a8%e6%88%b7%e5%92%8c%e7%bb%84%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4%20%e7%90%86%e8%a7%a3%e5%b9%b6%e8%ae%be%e7%bd%ae%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%20%e9%bb%98%e8%ae%a4%e6%9d%83%e9%99%90%20%e7%89%b9%e6%ae%8a%e6%9d%83%e9%99%90%20ACL%20%e4%bb%8b%e7%bb%8d%e5%ae%89%e5%85%a8%203A%20%e8%b5%84%e6%ba%90%e5%88%86%e6%b4%be%ef%bc%9a%20Authentication%ef%bc%9a%e8%ae%a4%e8%af%81%20Authorization%ef%bc%9a%e6%8e%88%e6%9d%83%20Accounting%7cAudition%ef%bc%9a%e5%ae%a1%e8%ae%a1%20%e7%94%a8%e6%88%b7%20user%20%e4%bb%a4%e2%80%a6%e2%80%a6&amp;pics=https://oss.intelli.icu/images/2021/20210607235726.png-watermark&amp;site=%e7%8e%8b%e7%a1%95%27s%20Blog" title="分享到「QQ 空间」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon qzone-icon"><path d="M23.985 9.202c-.032-.099-.127-.223-.334-.258-.207-.036-7.351-1.406-7.351-1.406s-.105-.022-.198-.07c-.092-.047-.127-.167-.127-.167S12.447.956 12.349.77C12.25.583 12.104.532 12 .532c-.104 0-.251.051-.349.238-.098.186-3.626 6.531-3.626 6.531s-.035.12-.128.167c-.092.047-.197.07-.197.07S.556 8.908.348 8.943c-.208.036-.302.16-.333.258a.477.477 0 0 0 .125.449l5.362 5.49s.072.08.119.172c.016.104.005.21.005.21s-1.189 7.242-1.22 7.45.075.369.159.43c.083.062.233.106.421.013.189-.093 6.812-3.261 6.812-3.261s.098-.044.201-.061c.103-.017.201.061.201.061s6.623 3.168 6.812 3.261c.188.094.338.049.421-.013a.463.463 0 0 0 .159-.43c-.021-.14-.93-5.677-.93-5.677.876-.54 1.425-1.039 1.849-1.747-2.594.969-6.006 1.717-9.415 1.866-.915.041-2.41.097-3.473-.015-.678-.071-1.17-.144-1.243-.438-.053-.215.054-.46.545-.831a2640.5 2640.5 0 0 1 2.861-2.155c1.285-.968 3.559-2.47 3.559-2.731 0-.285-2.144-.781-4.037-.781-1.945 0-2.275.132-2.811.168-.488.034-.769.005-.804-.138-.06-.248.183-.389.588-.568.709-.314 1.86-.594 1.984-.626.194-.052 3.082-.805 5.618-.535 1.318.14 3.244.668 3.244 1.276 0 .342-1.721 1.494-3.225 2.597-1.149.843-2.217 1.561-2.217 1.688 0 .342 3.533 1.241 6.689 1.01l.003-.022c.048-.092.119-.172.119-.172l5.362-5.49a.477.477 0 0 0 .127-.449z"/></svg></a>
                </div>
            

            
                <div class="share-item qrcode">
                    <div class="qrcode-container" title="通过「二维码」"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qrcode-icon"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"/></svg><div id="qrcode-img"></div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>

<script>
    var typeNumber = 0;
    var errorCorrectionLevel = 'L';
    var qr = qrcode(typeNumber, errorCorrectionLevel);
    qr.addData('https:\/\/blog.ws.lu\/posts\/linux\/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF\/%E9%98%B6%E6%AE%B5%E4%B8%80-linux%E5%85%A5%E9%97%A8\/linux-user-group-permission\/');
    qr.make();
    document.getElementById('qrcode-img').innerHTML = qr.createImgTag();
</script>

                </div>
            

        </div>

    </div>




        
    
    
        <div class="related-posts">
            <h2 class="related-title">相关文章：<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
            <ul class="related-list">
                
                    <li class="related-item">
                        <a href="/posts/linux/xrandr-set-scale/" class="related-link">xrandr 设置显示比例</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/linux/umount-nfs-device-is-busy/" class="related-link">umount.nfs device is busy 问题</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/linux/linux-systemd-config/" class="related-link">systemd 启动配置文件说明</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/database/mysql-install-by-normal-user/" class="related-link">普通用户安装 MySQL</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/linux/ubuntu/ubuntu-bluetooth-earphone/" class="related-link">Ubuntu 连接不上蓝牙耳机</a>
                    </li>
                
            </ul>
        </div>
    



        
    
        <div class="post-tags">
            
                
                
                
                
                    
                    <a href="/tags/linux/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Linux</a>
                
            
        </div>
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="/posts/java/maven-profile/" rel="prev">&lt; maven 使用 profile</a>
                </li>
            
            
                <li class="post-nav-next">
                    <a href="/posts/linux/%E9%98%BF%E9%87%8C%E4%BA%91linux%E8%BF%90%E7%BB%B4%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/linux-learn-route-table/" rel="next">阿里云 Linux 运维学习路线目录 &gt;</a>
                </li>
            
        </ul>
    



        


    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">©&nbsp;2019–2024&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;王硕</div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div><div class="site-copyright">本博客所有文章如无特别声明，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处 <a href="https://blog.ws.lu/" target="_blank" rel="noopener">王硕's Blog</a>。如有侵权，请联系删除。</div>

            
    
        <ul class="socials"><li class="socials-item">
                    <a href="/rss.xml" target="_blank" rel="external noopener" title="RSS"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></a>
                </li><li class="socials-item">
                    <a href="mailto:337229941@qq.com" target="_blank" rel="external noopener" title="Email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://github.com/swang-harbin" target="_blank" rel="external noopener" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://twitter.com/swang_harbin" target="_blank" rel="external noopener" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://t.me/swang_harbin" target="_blank" rel="external noopener" title="Telegram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon social-icon"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg></a>
                </li></ul>
    



            
        </div>
    </footer>


        </div>
        

        
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha256-gPJfuwTULrEAAcI3X4bALVU/2qBU+QY/TpoD3GO+Exw=" crossorigin="anonymous">
<script>
    if (typeof renderMathInElement === 'undefined') {
        var getScript = (options) => {
            var script = document.createElement('script');
            script.defer = true;
            script.crossOrigin = 'anonymous';
            Object.keys(options).forEach((key) => {
                script[key] = options[key];
            });
            document.body.appendChild(script);
        };
        getScript({
            src: 'https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js',
            integrity: 'sha256-YTW9cMncW/ZQMhY69KaUxIa2cPTxV87Uh627Gf5ODUw=',
            onload: () => {
                getScript({
                    src: 'https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/mhchem.min.js',
                    integrity: 'sha256-yzSfYeVsWJ1x+2g8CYHsB/Mn7PcSp8122k5BM4T3Vxw=',
                    onload: () => {
                        getScript({
                            src: 'https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js',
                            integrity: 'sha256-fxJzNV6hpc8tgW8tF0zVobKa71eTCRGTgxFXt1ZpJNM=',
                            onload: () => {
                                renderKaTex();
                            }
                        });
                    }
                });
            }
        });
    } else {
        renderKaTex();
    }
    function renderKaTex() {
        renderMathInElement(
            document.body,
            {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\(", right: "\\)", display: false}
                ]
            }
        );
    }
</script>






    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.8.3/dist/mermaid.min.js"></script>
<script>
    let mermaidConfig = {
        startOnLoad: true,
        flowchart: {
            useMaxWidth: false,
            htmlLabels: true
        },
        theme: 'default'
    };
    mermaid.initialize(mermaidConfig);
</script>





    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    let imgNodes = document.querySelectorAll('div.post-body img');
    imgNodes = Array.from(imgNodes).filter(node => node.parentNode.tagName !== "A");

    mediumZoom(imgNodes, {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>




    <script src="https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js" type="module" defer></script>







    </body>
</html>
